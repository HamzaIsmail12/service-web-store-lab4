name: Docker Build and test 

on:
 push:
  branches:
    - testing-pipeline

jobs:
 build:
  runs-on: ubuntu-latest

  steps:
    - name: Checkout our repository
      uses: actions/checkout@v2

    - name: setup Node
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Build the Docker Image 
      run: docker build- -t hamzaismael2/service-web-store-lab4:${{ github.sha }} . 


    - name: log in to the ole Docker hub
      run: docker login -u ${{ secrets.DOCKERNAME_USERNAME }} -p ${{ secrets.DOCKERHUB_TOKEN}} 


    - name : push the docker to that silly little dockerhub
      run: docker push hamzaismael2/service-web-store-lab4:${{ github.sha }}